<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crashpad: crashpad::UniversalMachExcServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="crashpad_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Crashpad
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcrashpad_1_1UniversalMachExcServer.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcrashpad_1_1UniversalMachExcServer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">crashpad::UniversalMachExcServer Class Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>A server interface for the <code>exc</code> and <code>mach_exc</code> Mach subsystems, unified to handle exceptions delivered to either subsystem, and simplified to have only a single interface method needing implementation.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;util/mach/exc_server_variants.h&quot;</code></p>
<div class="dynheader">
Inheritance diagram for crashpad::UniversalMachExcServer:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classcrashpad_1_1UniversalMachExcServer__inherit__graph.svg" width="226" height="156"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for crashpad::UniversalMachExcServer:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classcrashpad_1_1UniversalMachExcServer__coll__graph.svg" width="226" height="156"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1UniversalMachExcServer_1_1Interface.html">Interface</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An interface that the different request messages that are a part of the <code>exc</code> and <code>mach_exc</code> Mach subsystems can be dispatched to.  <a href="classcrashpad_1_1UniversalMachExcServer_1_1Interface.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a05bf6aa6e6e692e998a8ba2d6b5a6c95" id="r_a05bf6aa6e6e692e998a8ba2d6b5a6c95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05bf6aa6e6e692e998a8ba2d6b5a6c95">UniversalMachExcServer</a> (<a class="el" href="classcrashpad_1_1UniversalMachExcServer_1_1Interface.html">Interface</a> *interface)</td></tr>
<tr class="memdesc:a05bf6aa6e6e692e998a8ba2d6b5a6c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an object of this class.  <br /></td></tr>
<tr class="separator:a05bf6aa6e6e692e998a8ba2d6b5a6c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187bca9eb1c974ae12c4a6b05907068d" id="r_a187bca9eb1c974ae12c4a6b05907068d"><td class="memItemLeft" align="right" valign="top"><a id="a187bca9eb1c974ae12c4a6b05907068d" name="a187bca9eb1c974ae12c4a6b05907068d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>UniversalMachExcServer</b> (const <a class="el" href="classcrashpad_1_1UniversalMachExcServer.html">UniversalMachExcServer</a> &amp;)=delete</td></tr>
<tr class="separator:a187bca9eb1c974ae12c4a6b05907068d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a71f8153c7de62990b71d1ae1ef758a" id="r_a1a71f8153c7de62990b71d1ae1ef758a"><td class="memItemLeft" align="right" valign="top"><a id="a1a71f8153c7de62990b71d1ae1ef758a" name="a1a71f8153c7de62990b71d1ae1ef758a"></a>
<a class="el" href="classcrashpad_1_1UniversalMachExcServer.html">UniversalMachExcServer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classcrashpad_1_1UniversalMachExcServer.html">UniversalMachExcServer</a> &amp;)=delete</td></tr>
<tr class="separator:a1a71f8153c7de62990b71d1ae1ef758a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113ce518d5412e2cf352eb7f857fa9fb" id="r_a113ce518d5412e2cf352eb7f857fa9fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a113ce518d5412e2cf352eb7f857fa9fb">MachMessageServerFunction</a> (const mach_msg_header_t *in_header, mach_msg_header_t *out_header, bool *destroy_complex_request) override</td></tr>
<tr class="memdesc:a113ce518d5412e2cf352eb7f857fa9fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a Mach RPC request.  <br /></td></tr>
<tr class="separator:a113ce518d5412e2cf352eb7f857fa9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f192938859fb4b0fa637bf34ab0a1c" id="r_ab9f192938859fb4b0fa637bf34ab0a1c"><td class="memItemLeft" align="right" valign="top">std::set&lt; mach_msg_id_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9f192938859fb4b0fa637bf34ab0a1c">MachMessageServerRequestIDs</a> () override</td></tr>
<tr class="separator:ab9f192938859fb4b0fa637bf34ab0a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae700d18241f2eb3c7d755ad8c909ecec" id="r_ae700d18241f2eb3c7d755ad8c909ecec"><td class="memItemLeft" align="right" valign="top">mach_msg_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae700d18241f2eb3c7d755ad8c909ecec">MachMessageServerRequestSize</a> () override</td></tr>
<tr class="separator:ae700d18241f2eb3c7d755ad8c909ecec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eeb93504e604f53fc5c9cf1c66d838c" id="r_a1eeb93504e604f53fc5c9cf1c66d838c"><td class="memItemLeft" align="right" valign="top">mach_msg_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1eeb93504e604f53fc5c9cf1c66d838c">MachMessageServerReplySize</a> () override</td></tr>
<tr class="separator:a1eeb93504e604f53fc5c9cf1c66d838c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A server interface for the <code>exc</code> and <code>mach_exc</code> Mach subsystems, unified to handle exceptions delivered to either subsystem, and simplified to have only a single interface method needing implementation. </p>
<p>The <code>&lt;mach/exc.defs&gt;</code> and <code>&lt;mach/mach_exc.defs&gt;</code> interfaces are identical, except that the latter allows for 64-bit exception codes, and is requested by setting the MACH_EXCEPTION_CODES behavior bit associated with an exception port.</p>
<p><a class="el" href="classcrashpad_1_1UniversalMachExcServer.html" title="A server interface for the exc and mach_exc Mach subsystems, unified to handle exceptions delivered t...">UniversalMachExcServer</a> operates by translating messages received in the <code>exc</code> subsystem to a variant that is compatible with the <code>mach_exc</code> subsystem. This involves changing the format of <em class="arg">code</em>, the exception code field, from <code>exception_data_type_t</code> to <code>mach_exception_data_type_t</code>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a05bf6aa6e6e692e998a8ba2d6b5a6c95" name="a05bf6aa6e6e692e998a8ba2d6b5a6c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05bf6aa6e6e692e998a8ba2d6b5a6c95">&#9670;&#160;</a></span>UniversalMachExcServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">crashpad::UniversalMachExcServer::UniversalMachExcServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcrashpad_1_1UniversalMachExcServer_1_1Interface.html">UniversalMachExcServer::Interface</a> *</td>          <td class="paramname"><span class="paramname"><em>interface</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an object of this class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">interface</td><td>The interface to dispatch requests to. Weak. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a113ce518d5412e2cf352eb7f857fa9fb" name="a113ce518d5412e2cf352eb7f857fa9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113ce518d5412e2cf352eb7f857fa9fb">&#9670;&#160;</a></span>MachMessageServerFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool crashpad::UniversalMachExcServer::MachMessageServerFunction </td>
          <td>(</td>
          <td class="paramtype">const mach_msg_header_t *</td>          <td class="paramname"><span class="paramname"><em>in</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mach_msg_header_t *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *</td>          <td class="paramname"><span class="paramname"><em>destroy_complex_request</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a Mach RPC request. </p>
<p>This method is a stand-in for a MIG-generated Mach RPC server “demux” function such as <code>exc_server()</code> and <code>mach_exc_server()</code>. Implementations may call such a function directly. This method is expected to behave exactly as these functions behave.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>The request message, received as a Mach message. Note that this interface uses a <code>const</code> parameter for this purpose, whereas MIG-generated “demux” functions do not. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>The reply message. The caller allocates storage, and the callee is expected to populate the reply message appropriately. After returning, the caller will send this reply as a Mach message via the message’s reply port. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">destroy_complex_request</td><td><code>true</code> if a complex request message is to be destroyed even when handled successfully, <code>false</code> otherwise. The traditional behavior is <code>false</code>. In this case, the caller only destroys the request message in <em class="arg">in</em> when the reply message in <em class="arg">out</em> is not complex and when it indicates a return code other than <code>KERN_SUCCESS</code> or <code>MIG_NO_REPLY</code>. The assumption is that the rights or out-of-line data carried in a complex message may be retained by the server in this situation, and that it is the responsibility of the server to release these resources as needed. However, in many cases, these resources are not needed beyond the duration of a request-reply transaction, and in such cases, it is less error-prone to always have the caller, <a class="el" href="classcrashpad_1_1MachMessageServer.html#ace981f2e495984f119aa074f7d33bff6" title="Runs a Mach message server to handle a Mach RPC request for MIG servers.">MachMessageServer::Run()</a>, destroy complex request messages. To choose this behavior, this parameter should be set to <code>true</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success and <code>false</code> on failure, although the caller ignores the return value. However, the return code to be included in the reply message should be set as <code>mig_reply_error_t::RetCode</code>. The non-<code>void</code> return value is used for increased compatibility with MIG-generated functions. </dd></dl>

<p>Implements <a class="el" href="classcrashpad_1_1MachMessageServer_1_1Interface.html#ad1632cba188c113600abc94d1b45efe6">crashpad::MachMessageServer::Interface</a>.</p>

</div>
</div>
<a id="a1eeb93504e604f53fc5c9cf1c66d838c" name="a1eeb93504e604f53fc5c9cf1c66d838c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eeb93504e604f53fc5c9cf1c66d838c">&#9670;&#160;</a></span>MachMessageServerReplySize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mach_msg_size_t crashpad::UniversalMachExcServer::MachMessageServerReplySize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The maximum size, in bytes, of a reply message to be sent via the <em class="arg">out</em> parameter of <a class="el" href="#a113ce518d5412e2cf352eb7f857fa9fb" title="Handles a Mach RPC request.">MachMessageServerFunction()</a>. This value does not need to include the size of any trailer to be sent with the message. </dd></dl>

<p>Implements <a class="el" href="classcrashpad_1_1MachMessageServer_1_1Interface.html#ad4e6169aeb91074d573e77b9a47266c5">crashpad::MachMessageServer::Interface</a>.</p>

</div>
</div>
<a id="ab9f192938859fb4b0fa637bf34ab0a1c" name="ab9f192938859fb4b0fa637bf34ab0a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f192938859fb4b0fa637bf34ab0a1c">&#9670;&#160;</a></span>MachMessageServerRequestIDs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; mach_msg_id_t &gt; crashpad::UniversalMachExcServer::MachMessageServerRequestIDs </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The set of request message Mach message IDs that <a class="el" href="#a113ce518d5412e2cf352eb7f857fa9fb" title="Handles a Mach RPC request.">MachMessageServerFunction()</a> is able to handle. </dd></dl>

<p>Implements <a class="el" href="classcrashpad_1_1MachMessageServer_1_1Interface.html#a0f04520630c0865fa0ecbaadcf328e16">crashpad::MachMessageServer::Interface</a>.</p>

</div>
</div>
<a id="ae700d18241f2eb3c7d755ad8c909ecec" name="ae700d18241f2eb3c7d755ad8c909ecec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae700d18241f2eb3c7d755ad8c909ecec">&#9670;&#160;</a></span>MachMessageServerRequestSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mach_msg_size_t crashpad::UniversalMachExcServer::MachMessageServerRequestSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The expected or maximum size, in bytes, of a request message to be received as the <em class="arg">in</em> parameter of <a class="el" href="#a113ce518d5412e2cf352eb7f857fa9fb" title="Handles a Mach RPC request.">MachMessageServerFunction()</a>. </dd></dl>

<p>Implements <a class="el" href="classcrashpad_1_1MachMessageServer_1_1Interface.html#a319dd9279e87b4407cee3c8feca405ab">crashpad::MachMessageServer::Interface</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>util/mach/<b>exc_server_variants.h</b></li>
<li>util/mach/<b>exc_server_variants.cc</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecrashpad.html">crashpad</a></li><li class="navelem"><a class="el" href="classcrashpad_1_1UniversalMachExcServer.html">UniversalMachExcServer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
